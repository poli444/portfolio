<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Портфолио — адаптивный лендинг</title>
  <link rel="stylesheet" href="style.css">

  <!-- Рекомендуется: заранее подсказать браузеру подгрузить плашки -->
  <link rel="preload" href="images/top-desktop.webp" as="image" media="(min-width: 768px)" type="image/webp">
  <link rel="preload" href="images/top-mobile.webp"  as="image" media="(max-width: 767px)" type="image/webp">
</head>
<body>

  <!-- НЕПОДВИЖНАЯ ПЛАШКА (фиксируется вверху). 
       Если хочешь — легко переключить на bottom (в CSS есть подсказка). -->
  <header class="header" role="banner" aria-label="Контакты">
    <!-- mobile source first (picked when viewport <=767px), then desktop -->
    <picture class="header-picture mobile">
      <source media="(max-width: 767px)" srcset="images/top-mobile.webp" type="image/webp">
      <source media="(max-width: 767px)" srcset="images/top-mobile.png">
      <img src="images/top-mobile.webp" alt="Контакты — мобильная" loading="eager">
    </picture>

    <picture class="header-picture desktop">
      <source media="(min-width: 768px)" srcset="images/top-desktop.webp" type="image/webp">
      <source media="(min-width: 768px)" srcset="images/top-desktop.png">
      <img src="images/top-desktop.webp" alt="Контакты — десктоп" loading="eager">
    </picture>
  </header>

  <!-- Контейнер для лендинга -->
  <main id="main" class="main-content" role="main" aria-label="Лента портфолио">
    <!-- JS динамически создаст 18 блоков (каждый блок сам выберет desktop или mobile картинку по media) -->
    <div id="blocks-container" class="blocks-container"></div>
  </main>

  <script>
    // Генерация блоков после загрузки DOM — безопасно для GitHub Pages
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('blocks-container');
      const total = 18; // 1..18

      for (let i = 1; i <= total; i++) {
        const block = document.createElement('section');
        block.className = 'block';
        block.setAttribute('aria-label', `Блок ${i}`);

        // Важно: mobile sources идут первыми (media (max-width:767px)), затем desktop (min-width:768px)
        block.innerHTML = `
          <picture>
            <source media="(max-width: 767px)" srcset="images/mobile-${i}.webp" type="image/webp">
            <source media="(max-width: 767px)" srcset="images/mobile-${i}.png">
            <source media="(min-width: 768px)" srcset="images/desktop-${i}.webp" type="image/webp">
            <source media="(min-width: 768px)" srcset="images/desktop-${i}.png">
            <!-- fallback: desktop webp (will be used if no source matched for some reason) -->
            <img src="images/desktop-${i}.webp" alt="Блок ${i}" loading="lazy">
          </picture>
        `;
        container.appendChild(block);
      }
    });
  </script>
</body>
</html>
